"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2076],{2076:(y,g,r)=>{r.r(g),r.d(g,{EditProductModule:()=>_});var m=r(6814),p=r(3057),P=r(5861),a=r(95),f=r(7394),t=r(6689),i=r(5548),h=r(4695),C=r(7942);function b(n,s){if(1&n&&t._UZ(0,"img",15),2&n){const e=t.oxw();t.Q6J("src",e.imagePreview,t.LSH)}}function v(n,s){1&n&&t._UZ(0,"ion-icon",16)}const M=[{path:"",component:(()=>{class n{constructor(e,o,d,l,c,u){this.fb=e,this.loadingCtrl=o,this.toastCtrl=d,this._user=l,this._productServicr=c,this.navCtrl=u,this.imagePreview=null,this.subscriptions=new f.w0}ngOnInit(){this.itemData=this._productServicr.getItemData(),this.formSetUp(),this.imagePreview=this.itemData.image1}formSetUp(){this.productForm=this.fb.group({name:[this.itemData.name,[a.kI.required,a.kI.minLength(3)]],barcode:[this.itemData.barcode,[a.kI.required,a.kI.min(0)]],image:[this.itemData.image1,""]})}onImageSelect(e){var o=this;return(0,P.Z)(function*(){const d=e.target.files[0];if(d){if(d.size/1024>700)return void(yield(yield o.toastCtrl.create({message:"Image size must be less than or equal to 700 KB.",duration:2e3,color:"danger"})).present());const c=new FileReader;c.onload=()=>{o.imagePreview=c.result,o.productForm.patchValue({image:c.result})},c.readAsDataURL(d)}})()}onSubmit(){var e=this;return(0,P.Z)(function*(){if(e.productForm.valid){const o=yield e.loadingCtrl.create({message:"Adding product..."});yield o.present();try{const d={...e.productForm.value,lastUpdatedDate:(new Date).toISOString(),createdDate:e.itemData.createdDate,id:e.itemData.id,categoryId:e.itemData.category,stockAmount:e.itemData.stockAmount,shortDescription:e.itemData.shortDescription,longDescription:e.itemData.longDescription,unitPrice:e.itemData.unitPrice},l=e._user.geteditproduct(d).subscribe(u=>{console.log(u)});e.subscriptions.add(l),yield o.dismiss(),yield(yield e.toastCtrl.create({message:"Product added successfully!",duration:2e3,color:"success"})).present(),setTimeout(()=>{e.navCtrl.navigateForward("/product")},2e3),e.productForm.reset(),e.imagePreview=null}catch{yield o.dismiss(),yield(yield e.toastCtrl.create({message:"Failed to add product. Please try again.",duration:2e3,color:"danger"})).present()}}else yield(yield e.toastCtrl.create({message:"Please fill in all required fields correctly.",duration:2e3,color:"warning"})).present()})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(i.HT),t.Y36(i.yF),t.Y36(h.K),t.Y36(C.M),t.Y36(i.SH))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-product"]],decls:28,vars:7,consts:[["slot","start"],["defaultHref","/products"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"image-upload-container"],[1,"image-preview"],[3,"src",4,"ngIf"],["name","image-outline",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],["fileInput",""],["fill","clear","expand","block",3,"click"],["position","stacked"],["formControlName","name","placeholder","Enter product name"],["formControlName","barcode","placeholder","Enter barcode"],[1,"submit-button"],["expand","block","type","submit",3,"disabled"],[3,"src"],["name","image-outline"]],template:function(e,o){if(1&e){const d=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Edit Product"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"form",2),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(8,"div",3)(9,"div",4),t.YNc(10,b,1,1,"img",5),t.YNc(11,v,1,0,"ion-icon",6),t.TgZ(12,"input",7,8),t.NdJ("change",function(c){return o.onImageSelect(c)}),t.qZA(),t.TgZ(14,"ion-button",9),t.NdJ("click",function(){t.CHM(d);const c=t.MAs(13);return t.KtG(c.click())}),t._uU(15),t.qZA()()(),t.TgZ(16,"ion-list")(17,"ion-item")(18,"ion-label",10),t._uU(19,"Product Name*"),t.qZA(),t._UZ(20,"ion-input",11),t.qZA(),t.TgZ(21,"ion-item")(22,"ion-label",10),t._uU(23,"Barcode"),t.qZA(),t._UZ(24,"ion-input",12),t.qZA()(),t.TgZ(25,"div",13)(26,"ion-button",14),t._uU(27," Update Product "),t.qZA()()()()}2&e&&(t.xp6(7),t.Q6J("formGroup",o.productForm),t.xp6(2),t.ekj("has-image",o.imagePreview),t.xp6(1),t.Q6J("ngIf",o.imagePreview),t.xp6(1),t.Q6J("ngIf",!o.imagePreview),t.xp6(4),t.hij(" ",o.imagePreview?"Change Image":"Upload Image"," "),t.xp6(11),t.Q6J("disabled",!o.productForm.valid))},dependencies:[m.O5,i.oU,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.pK,i.Ie,i.Q$,i.q_,i.wd,i.sr,i.j9,i.cs,a._Y,a.JJ,a.JL,a.sg,a.u],styles:[".image-upload-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px 0}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{width:200px;height:200px;border:2px dashed var(--ion-color-medium);border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;position:relative;background:var(--ion-color-light)}.image-upload-container[_ngcontent-%COMP%]   .image-preview.has-image[_ngcontent-%COMP%]{border-style:solid}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:var(--ion-color-medium)}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;bottom:8px;background:rgba(var(--ion-color-light-rgb),.9);border-radius:20px;font-size:14px}ion-list[_ngcontent-%COMP%]{background:transparent;padding:0;margin:16px 0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--border-color: var(--ion-color-light);margin-bottom:16px;--background: var(--ion-color-light);border-radius:8px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--ion-color-dark);font-weight:500}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{--padding-start: 16px;--background: var(--ion-color-light);border-radius:8px;font-size:16px}.submit-button[_ngcontent-%COMP%]{margin:24px 0}.submit-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-weight:600;font-size:16px;margin:0}@media (min-width: 768px){form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(M),p.Bz]}),n})(),_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.ez,O,i.Pc,a.UX]}),n})()}}]);