"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9533],{9533:(I,P,a)=>{a.r(P),a.d(P,{PurchasesEditModule:()=>F});var f=a(6814),i=a(5548),r=a(95),_=a(3057),b=a(5861),C=a(7394),t=a(6689),M=a(4695),O=a(7942);function v(e,c){if(1&e&&t._UZ(0,"img",21),2&e){const n=t.oxw();t.Q6J("src",n.imagePreview,t.LSH)}}function x(e,c){1&e&&(t.TgZ(0,"ion-note",22),t._uU(1," Quantity is required "),t.qZA())}function Z(e,c){1&e&&(t.TgZ(0,"ion-note",22),t._uU(1," Quantity must be greater than zero "),t.qZA())}function y(e,c){1&e&&(t.TgZ(0,"ion-note",22),t._uU(1," Unit price is required "),t.qZA())}function k(e,c){1&e&&(t.TgZ(0,"ion-note",22),t._uU(1," Unit price must be greater than zero "),t.qZA())}function A(e,c){1&e&&(t.TgZ(0,"ion-note",22),t._uU(1," Purchase price is required "),t.qZA())}function U(e,c){1&e&&(t.TgZ(0,"ion-note",22),t._uU(1," Purchase price must be greater than zero "),t.qZA())}function T(e,c){1&e&&(t.TgZ(0,"ion-note",22),t._uU(1," Bulk price is required "),t.qZA())}function q(e,c){1&e&&(t.TgZ(0,"ion-note",22),t._uU(1," Bulk price must be greater than zero "),t.qZA())}const D=[{path:"",component:(()=>{class e{constructor(n,o,u,d,l,s){this.fb=n,this.loadingCtrl=o,this.toastCtrl=u,this._user=d,this._productService=l,this.navCtrl=s,this.imagePreview=null,this.subscriptions=new C.w0}ngOnInit(){this.itemData=this._productService.getItemData(),this.formSetUp(),this.imagePreview=this.itemData.image1}formSetUp(){this.productForm=this.fb.group({name:[{value:this.itemData.name,disabled:!0}],barcode:[{value:this.itemData.barcode,disabled:!0}],image:[{value:this.itemData.image1,disabled:!0}],stockAmount:[this.itemData.stockAmount,[r.kI.required,r.kI.min(0)]],unitPrice:[this.itemData.unitPrice,[r.kI.required,r.kI.min(0)]],purchasePrice:[this.itemData.purchasePrice,[r.kI.required,r.kI.min(0)]],bulkPrice:[this.itemData.bulkPrice,[r.kI.required,r.kI.min(0)]]})}onSubmit(){var n=this;return(0,b.Z)(function*(){if(n.productForm.valid){const o=yield n.loadingCtrl.create({message:"Updating product prices..."});yield o.present();try{const u={id:n.itemData.id,name:n.itemData.name,image:n.itemData.image1,createdDate:n.itemData.createdDate,lastUpdatedDate:(new Date).toISOString(),categoryId:n.itemData.category,barcode:n.itemData.barcode,shortDescription:n.itemData.shortDescription,longDescription:n.itemData.longDescription,stockAmount:n.productForm.get("stockAmount").value,unitPrice:n.productForm.get("unitPrice").value,purchasePrice:n.productForm.get("purchasePrice").value,bulkPrice:n.productForm.get("bulkPrice").value},d=n._user.geteditproduct(u).subscribe(s=>{console.log(s)});n.subscriptions.add(d),yield o.dismiss(),yield(yield n.toastCtrl.create({message:"Product prices updated successfully!",duration:2e3,color:"success"})).present(),setTimeout(()=>{n.navCtrl.navigateForward("/purchasesdashboardmodule")},2e3)}catch{yield o.dismiss(),yield(yield n.toastCtrl.create({message:"Failed to update product prices. Please try again.",duration:2e3,color:"danger"})).present()}}else yield(yield n.toastCtrl.create({message:"Please fill in all required price fields correctly.",duration:2e3,color:"warning"})).present()})()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.qu),t.Y36(i.HT),t.Y36(i.yF),t.Y36(M.K),t.Y36(O.M),t.Y36(i.SH))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-purchases-edit"]],decls:50,vars:13,consts:[["slot","start"],["defaultHref","/product"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],[1,"product-details-card"],[1,"product-image-container"],["alt","Product Image",3,"src",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"barcode-container"],[1,"barcode-label"],[1,"barcode-value"],[1,"price-edit-section"],["position","stacked"],["type","number","formControlName","stockAmount","inputmode","decimal"],["slot","error",4,"ngIf"],["type","number","formControlName","unitPrice","inputmode","decimal"],["type","number","formControlName","purchasePrice","inputmode","decimal"],["type","number","formControlName","bulkPrice","inputmode","decimal"],[1,"submit-button"],["expand","block","type","submit",3,"disabled"],["alt","Product Image",3,"src"],["slot","error"]],template:function(n,o){if(1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Update Product Prices"),t.qZA()()(),t.TgZ(6,"ion-content",2)(7,"form",3),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(8,"div",4)(9,"div",5),t.YNc(10,v,1,1,"img",6),t.qZA(),t.TgZ(11,"div",7)(12,"h2",8),t._uU(13),t.qZA(),t.TgZ(14,"div",9)(15,"span",10),t._uU(16,"Barcode:"),t.qZA(),t.TgZ(17,"span",11),t._uU(18),t.qZA()()()(),t.TgZ(19,"div",12)(20,"h3"),t._uU(21,"Update Pricing"),t.qZA(),t.TgZ(22,"ion-list")(23,"ion-item")(24,"ion-label",13),t._uU(25,"Quantity*"),t.qZA(),t._UZ(26,"ion-input",14),t.YNc(27,x,2,0,"ion-note",15),t.YNc(28,Z,2,0,"ion-note",15),t.qZA(),t.TgZ(29,"ion-item")(30,"ion-label",13),t._uU(31,"Unit Price*"),t.qZA(),t._UZ(32,"ion-input",16),t.YNc(33,y,2,0,"ion-note",15),t.YNc(34,k,2,0,"ion-note",15),t.qZA(),t.TgZ(35,"ion-item")(36,"ion-label",13),t._uU(37,"Purchase Price*"),t.qZA(),t._UZ(38,"ion-input",17),t.YNc(39,A,2,0,"ion-note",15),t.YNc(40,U,2,0,"ion-note",15),t.qZA(),t.TgZ(41,"ion-item")(42,"ion-label",13),t._uU(43,"Bulk Price*"),t.qZA(),t._UZ(44,"ion-input",18),t.YNc(45,T,2,0,"ion-note",15),t.YNc(46,q,2,0,"ion-note",15),t.qZA()()(),t.TgZ(47,"div",19)(48,"ion-button",20),t._uU(49," Update Prices "),t.qZA()()()()),2&n){let u,d,l,s,p,m,g,h;t.xp6(7),t.Q6J("formGroup",o.productForm),t.xp6(3),t.Q6J("ngIf",o.imagePreview),t.xp6(3),t.Oqu(o.itemData.name),t.xp6(5),t.Oqu(o.itemData.barcode),t.xp6(9),t.Q6J("ngIf",(null==(u=o.productForm.get("stockAmount"))?null:u.hasError("required"))&&(null==(u=o.productForm.get("stockAmount"))?null:u.touched)),t.xp6(1),t.Q6J("ngIf",(null==(d=o.productForm.get("stockAmount"))?null:d.hasError("min"))&&(null==(d=o.productForm.get("stockAmount"))?null:d.touched)),t.xp6(5),t.Q6J("ngIf",(null==(l=o.productForm.get("unitPrice"))?null:l.hasError("required"))&&(null==(l=o.productForm.get("unitPrice"))?null:l.touched)),t.xp6(1),t.Q6J("ngIf",(null==(s=o.productForm.get("unitPrice"))?null:s.hasError("min"))&&(null==(s=o.productForm.get("unitPrice"))?null:s.touched)),t.xp6(5),t.Q6J("ngIf",(null==(p=o.productForm.get("purchasePrice"))?null:p.hasError("required"))&&(null==(p=o.productForm.get("purchasePrice"))?null:p.touched)),t.xp6(1),t.Q6J("ngIf",(null==(m=o.productForm.get("purchasePrice"))?null:m.hasError("min"))&&(null==(m=o.productForm.get("purchasePrice"))?null:m.touched)),t.xp6(5),t.Q6J("ngIf",(null==(g=o.productForm.get("bulkPrice"))?null:g.hasError("required"))&&(null==(g=o.productForm.get("bulkPrice"))?null:g.touched)),t.xp6(1),t.Q6J("ngIf",(null==(h=o.productForm.get("bulkPrice"))?null:h.hasError("min"))&&(null==(h=o.productForm.get("bulkPrice"))?null:h.touched)),t.xp6(2),t.Q6J("disabled",!o.productForm.valid)}},dependencies:[f.O5,i.oU,i.YG,i.Sm,i.W2,i.Gu,i.pK,i.Ie,i.Q$,i.q_,i.uN,i.wd,i.sr,i.as,i.cs,r._Y,r.JJ,r.JL,r.sg,r.u],styles:[".product-details-card[_ngcontent-%COMP%]{background-color:var(--ion-color-light);border-radius:16px;overflow:hidden;box-shadow:0 4px 12px #0000000d;margin-bottom:24px;display:flex;flex-direction:column}@media (min-width: 768px){.product-details-card[_ngcontent-%COMP%]{flex-direction:row}}.product-details-card[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{height:200px;width:100%;overflow:hidden;background-color:#f5f5f5}@media (min-width: 768px){.product-details-card[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{width:200px;height:auto}}.product-details-card[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{padding:16px;flex:1}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{margin:0 0 12px;font-size:20px;font-weight:600;color:var(--ion-color-dark)}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:rgba(var(--ion-color-medium-rgb),.1);padding:8px 12px;border-radius:8px;margin-bottom:8px}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]   .barcode-label[_ngcontent-%COMP%]{font-weight:500;margin-right:8px;color:var(--ion-color-medium)}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]   .barcode-value[_ngcontent-%COMP%]{font-family:monospace;letter-spacing:1px;color:var(--ion-color-dark)}.price-edit-section[_ngcontent-%COMP%]{margin-bottom:24px}.price-edit-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:16px;color:var(--ion-color-dark);padding-left:8px;border-left:4px solid var(--ion-color-primary)}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent;padding:0}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--background: var(--ion-color-light);border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000000a}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--ion-color-dark);font-weight:500}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-start: 16px;--background: var(--ion-color-light);border-radius:8px;font-size:16px}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:12px;padding-left:16px}.submit-button[_ngcontent-%COMP%]{margin:24px 0}.submit-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;height:52px;font-weight:600;font-size:16px;margin:0;--box-shadow: 0 4px 10px rgba(var(--ion-color-primary-rgb), .3)}@media (min-width: 768px){form[_ngcontent-%COMP%]{max-width:700px;margin:0 auto}}"]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(D),_.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.ez,i.Pc,r.UX,r.u5,E]}),e})()}}]);