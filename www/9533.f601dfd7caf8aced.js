"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9533],{9533:(I,P,c)=>{c.r(P),c.d(P,{PurchasesEditModule:()=>F});var f=c(6814),i=c(5548),r=c(95),_=c(3057),b=c(5861),C=c(7394),t=c(6689),M=c(4695),x=c(7942);function O(e,a){if(1&e&&t._UZ(0,"img",24),2&e){const n=t.oxw();t.Q6J("src",n.imagePreview,t.LSH)}}function v(e,a){1&e&&(t.TgZ(0,"ion-note",25),t._uU(1," Quantity is required "),t.qZA())}function Z(e,a){1&e&&(t.TgZ(0,"ion-note",25),t._uU(1," Quantity must be greater than zero "),t.qZA())}function y(e,a){1&e&&(t.TgZ(0,"ion-note",25),t._uU(1," Unit price is required "),t.qZA())}function k(e,a){1&e&&(t.TgZ(0,"ion-note",25),t._uU(1," Unit price must be greater than zero "),t.qZA())}function A(e,a){1&e&&(t.TgZ(0,"ion-note",25),t._uU(1," Purchase price is required "),t.qZA())}function U(e,a){1&e&&(t.TgZ(0,"ion-note",25),t._uU(1," Purchase price must be greater than zero "),t.qZA())}function T(e,a){1&e&&(t.TgZ(0,"ion-note",25),t._uU(1," Bulk price is required "),t.qZA())}function D(e,a){1&e&&(t.TgZ(0,"ion-note",25),t._uU(1," Bulk price must be greater than zero "),t.qZA())}const q=[{path:"",component:(()=>{class e{constructor(n,o,u,s,l,d){this.fb=n,this.loadingCtrl=o,this.toastCtrl=u,this._user=s,this._productService=l,this.navCtrl=d,this.imagePreview=null,this.subscriptions=new C.w0}ngOnInit(){this.itemData=this._productService.getItemData(),this.formSetUp(),this.imagePreview=this.itemData.image1?this.itemData.image1:"assets/images/shopping-cart.png"}formSetUp(){this.productForm=this.fb.group({name:[{value:this.itemData.name,disabled:!0}],barcode:[{value:this.itemData.barcode,disabled:!0}],image:[{value:this.itemData.image1?this.itemData.image1:"assets/images/shopping-cart.png",disabled:!0}],stockAmount:[this.itemData.stockAmount,[r.kI.required,r.kI.min(0)]],unitPrice:[this.itemData.unitPrice,[r.kI.required,r.kI.min(0)]],purchasePrice:[this.itemData.purchasePrice,[r.kI.required,r.kI.min(0)]],bulkPrice:[this.itemData.bulkPrice,[r.kI.required,r.kI.min(0)]]})}onSubmit(){var n=this;return(0,b.Z)(function*(){if(n.productForm.valid){const o=yield n.loadingCtrl.create({message:"Updating product prices..."});yield o.present();try{const u={id:n.itemData.id,name:n.itemData.name,image:n.itemData.image1?n.itemData.image1:"assets/images/shopping-cart.png",createdDate:n.itemData.createdDate,lastUpdatedDate:(new Date).toISOString(),categoryId:n.itemData.category,barcode:n.itemData.barcode,shortDescription:n.itemData.shortDescription,longDescription:n.itemData.longDescription,stockAmount:n.productForm.get("stockAmount").value,unitPrice:n.productForm.get("unitPrice").value,purchasePrice:n.productForm.get("purchasePrice").value,bulkPrice:n.productForm.get("bulkPrice").value},s=n._user.geteditproduct(u).subscribe(d=>{console.log(d)});n.subscriptions.add(s),yield o.dismiss(),yield(yield n.toastCtrl.create({message:"Product prices updated successfully!",duration:2e3,color:"success"})).present(),setTimeout(()=>{n.navCtrl.navigateForward("/purchasesdashboardmodule")},2e3)}catch{yield o.dismiss(),yield(yield n.toastCtrl.create({message:"Failed to update product prices. Please try again.",duration:2e3,color:"danger"})).present()}}else yield(yield n.toastCtrl.create({message:"Please fill in all required price fields correctly.",duration:2e3,color:"warning"})).present()})()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.qu),t.Y36(i.HT),t.Y36(i.yF),t.Y36(M.K),t.Y36(x.M),t.Y36(i.SH))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-purchases-edit"]],decls:53,vars:13,consts:[["slot","start"],["defaultHref","/product"],[2,"display","flex"],[1,"balaanz-logo"],["src","/assets/images/balaanz-logo.jpg"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],[1,"product-details-card"],[1,"product-image-container"],["alt","Product Image",3,"src",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"barcode-container"],[1,"barcode-label"],[1,"barcode-value"],[1,"price-edit-section"],["position","stacked"],["type","number","formControlName","stockAmount","inputmode","decimal"],["slot","error",4,"ngIf"],["type","number","formControlName","unitPrice","inputmode","decimal"],["type","number","formControlName","purchasePrice","inputmode","decimal"],["type","number","formControlName","bulkPrice","inputmode","decimal"],[1,"submit-button"],["expand","block","type","submit",3,"disabled"],["alt","Product Image",3,"src"],["slot","error"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"div",2)(5,"ion-title"),t._uU(6,"Update Product Prices"),t.qZA(),t.TgZ(7,"span",3),t._UZ(8,"img",4),t.qZA()()()(),t.TgZ(9,"ion-content",5)(10,"form",6),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(11,"div",7)(12,"div",8),t.YNc(13,O,1,1,"img",9),t.qZA(),t.TgZ(14,"div",10)(15,"h2",11),t._uU(16),t.qZA(),t.TgZ(17,"div",12)(18,"span",13),t._uU(19,"Barcode:"),t.qZA(),t.TgZ(20,"span",14),t._uU(21),t.qZA()()()(),t.TgZ(22,"div",15)(23,"h3"),t._uU(24,"Update Pricing"),t.qZA(),t.TgZ(25,"ion-list")(26,"ion-item")(27,"ion-label",16),t._uU(28,"Quantity*"),t.qZA(),t._UZ(29,"ion-input",17),t.YNc(30,v,2,0,"ion-note",18),t.YNc(31,Z,2,0,"ion-note",18),t.qZA(),t.TgZ(32,"ion-item")(33,"ion-label",16),t._uU(34,"Unit Price*"),t.qZA(),t._UZ(35,"ion-input",19),t.YNc(36,y,2,0,"ion-note",18),t.YNc(37,k,2,0,"ion-note",18),t.qZA(),t.TgZ(38,"ion-item")(39,"ion-label",16),t._uU(40,"Purchase Price*"),t.qZA(),t._UZ(41,"ion-input",20),t.YNc(42,A,2,0,"ion-note",18),t.YNc(43,U,2,0,"ion-note",18),t.qZA(),t.TgZ(44,"ion-item")(45,"ion-label",16),t._uU(46,"Bulk Price*"),t.qZA(),t._UZ(47,"ion-input",21),t.YNc(48,T,2,0,"ion-note",18),t.YNc(49,D,2,0,"ion-note",18),t.qZA()()(),t.TgZ(50,"div",22)(51,"ion-button",23),t._uU(52," Update "),t.qZA()()()()),2&n){let u,s,l,d,p,m,g,h;t.xp6(10),t.Q6J("formGroup",o.productForm),t.xp6(3),t.Q6J("ngIf",o.imagePreview),t.xp6(3),t.Oqu(o.itemData.name),t.xp6(5),t.Oqu(o.itemData.barcode),t.xp6(9),t.Q6J("ngIf",(null==(u=o.productForm.get("stockAmount"))?null:u.hasError("required"))&&(null==(u=o.productForm.get("stockAmount"))?null:u.touched)),t.xp6(1),t.Q6J("ngIf",(null==(s=o.productForm.get("stockAmount"))?null:s.hasError("min"))&&(null==(s=o.productForm.get("stockAmount"))?null:s.touched)),t.xp6(5),t.Q6J("ngIf",(null==(l=o.productForm.get("unitPrice"))?null:l.hasError("required"))&&(null==(l=o.productForm.get("unitPrice"))?null:l.touched)),t.xp6(1),t.Q6J("ngIf",(null==(d=o.productForm.get("unitPrice"))?null:d.hasError("min"))&&(null==(d=o.productForm.get("unitPrice"))?null:d.touched)),t.xp6(5),t.Q6J("ngIf",(null==(p=o.productForm.get("purchasePrice"))?null:p.hasError("required"))&&(null==(p=o.productForm.get("purchasePrice"))?null:p.touched)),t.xp6(1),t.Q6J("ngIf",(null==(m=o.productForm.get("purchasePrice"))?null:m.hasError("min"))&&(null==(m=o.productForm.get("purchasePrice"))?null:m.touched)),t.xp6(5),t.Q6J("ngIf",(null==(g=o.productForm.get("bulkPrice"))?null:g.hasError("required"))&&(null==(g=o.productForm.get("bulkPrice"))?null:g.touched)),t.xp6(1),t.Q6J("ngIf",(null==(h=o.productForm.get("bulkPrice"))?null:h.hasError("min"))&&(null==(h=o.productForm.get("bulkPrice"))?null:h.touched)),t.xp6(2),t.Q6J("disabled",!o.productForm.valid)}},dependencies:[f.O5,i.oU,i.YG,i.Sm,i.W2,i.pK,i.Ie,i.Q$,i.q_,i.uN,i.wd,i.sr,i.as,i.cs,r._Y,r.JJ,r.JL,r.sg,r.u],styles:[".balaanz-logo[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;height:30px}.balaanz-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:80%;object-fit:cover;margin-right:10px}.product-details-card[_ngcontent-%COMP%]{background-color:var(--ion-color-light);border-radius:16px;overflow:hidden;box-shadow:0 4px 12px #0000000d;margin-bottom:24px;display:flex;flex-direction:column}@media (min-width: 768px){.product-details-card[_ngcontent-%COMP%]{flex-direction:row}}.product-details-card[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{height:200px;width:100%;overflow:hidden;background-color:#f5f5f5}@media (min-width: 768px){.product-details-card[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{width:200px;height:auto}}.product-details-card[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{padding:16px;flex:1}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{margin:0 0 12px;font-size:20px;font-weight:600;color:var(--ion-color-dark)}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:rgba(var(--ion-color-medium-rgb),.1);padding:8px 12px;border-radius:8px;margin-bottom:8px}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]   .barcode-label[_ngcontent-%COMP%]{font-weight:500;margin-right:8px;color:var(--ion-color-medium)}.product-details-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]   .barcode-value[_ngcontent-%COMP%]{font-family:monospace;letter-spacing:1px;color:var(--ion-color-dark)}.price-edit-section[_ngcontent-%COMP%]{margin-bottom:24px}.price-edit-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:16px;color:var(--ion-color-dark);padding-left:8px;border-left:4px solid var(--ion-color-primary)}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent;padding:0}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--background: var(--ion-color-light);border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000000a}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--ion-color-dark);font-weight:500}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-start: 16px;--background: var(--ion-color-light);border-radius:8px;font-size:16px}.price-edit-section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:12px;padding-left:16px}.submit-button[_ngcontent-%COMP%]{margin:24px 0}.submit-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;height:52px;font-weight:600;font-size:16px;margin:0;--box-shadow: 0 4px 10px rgba(var(--ion-color-primary-rgb), .3);--background: #ff2f00}@media (min-width: 768px){form[_ngcontent-%COMP%]{max-width:700px;margin:0 auto}}"]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(q),_.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.ez,i.Pc,r.UX,r.u5,E]}),e})()}}]);