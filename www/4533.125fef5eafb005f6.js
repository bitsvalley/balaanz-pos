"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4533],{4533:(z,u,s)=>{s.r(u),s.d(u,{PurchasesDashboardModule:()=>j});var g=s(6814),d=s(5548),l=s(95),h=s(3057),_=s(5861),f=s(7394),t=s(6689),m=s(4695),x=s(5821),P=s(2425),v=s(7535),b=s(7942);function C(e,r){1&e&&(t.TgZ(0,"div",40),t._UZ(1,"div",41),t.TgZ(2,"div",42),t._UZ(3,"div",43)(4,"div",44),t.qZA()())}const O=function(){return[1,2,3,4]};function Z(e,r){1&e&&(t.TgZ(0,"div",38),t.YNc(1,C,5,0,"div",39),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,O)))}function M(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",45),t._UZ(1,"ion-icon",46),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"ion-button",36),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.loadTrendingProducts())}),t._uU(5,"Try Again"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(3),t.Oqu(n.error)}}function y(e,r){if(1&e&&(t.TgZ(0,"div")(1,"b",49),t._uU(2),t.qZA()()),2&e){const n=t.oxw(2);t.xp6(2),t.Oqu(n.selelctedCategory.name)}}function T(e,r){if(1&e&&(t.TgZ(0,"div",47)(1,"div"),t._uU(2),t.qZA(),t.YNc(3,y,3,1,"div",48),t.qZA()),2&e){const n=t.oxw();t.xp6(2),t.hij("Total: ",n.filteredProducts.length,""),t.xp6(1),t.Q6J("ngIf",null!==n.selelctedCategory)}}function A(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",52)(1,"div",53),t._UZ(2,"img",54),t.qZA(),t.TgZ(3,"div",55)(4,"h3",56),t._uU(5),t.qZA(),t.TgZ(6,"div",57)(7,"div",58)(8,"div",59)(9,"span",60),t._uU(10,"Qty:"),t.qZA(),t.TgZ(11,"span",61),t._uU(12),t.qZA()(),t.TgZ(13,"div",59)(14,"span",62),t._uU(15,"UP:"),t.qZA(),t.TgZ(16,"span",61),t._uU(17),t.qZA()()(),t.TgZ(18,"div",58)(19,"div",59)(20,"span",63),t._uU(21,"PP:"),t.qZA(),t.TgZ(22,"span",61),t._uU(23),t.qZA()(),t.TgZ(24,"div",59)(25,"span",64),t._uU(26,"BP:"),t.qZA(),t.TgZ(27,"span",61),t._uU(28),t.qZA()()()(),t.TgZ(29,"div",65)(30,"ion-button",66),t.NdJ("click",function(){const c=t.CHM(n).$implicit,a=t.oxw(2);return t.KtG(a.editProduct(c))}),t._UZ(31,"ion-icon",67),t.qZA()()()()}if(2&e){const n=r.$implicit;t.xp6(2),t.Q6J("src",n.image1||n.image2||n.image3||n.image4||"assets/images/shopping-cart.png",t.LSH),t.xp6(3),t.Oqu(n.name),t.xp6(7),t.Oqu(n.stockAmount),t.xp6(5),t.Oqu(n.unitPrice),t.xp6(6),t.Oqu(n.purchasePrice),t.xp6(5),t.Oqu(n.bulkPrice)}}function k(e,r){if(1&e&&(t.TgZ(0,"div",50),t.YNc(1,A,32,6,"div",51),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.filteredProducts)}}function w(e,r){1&e&&(t.TgZ(0,"div",68),t._UZ(1,"ion-icon",69),t.TgZ(2,"h3"),t._uU(3,"No Products"),t.qZA()())}function U(e,r){if(1&e&&(t.TgZ(0,"span",72),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.totalProducts)}}const q=function(e){return{active:e}};function D(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"li",70),t.NdJ("click",function(){const c=t.CHM(n).$implicit,a=t.oxw();return t.KtG(a.selectCategory(c))}),t._uU(1),t.YNc(2,U,2,1,"span",71),t.TgZ(3,"span",13),t._uU(4," chevron_right "),t.qZA()()}if(2&e){const n=r.$implicit,o=t.oxw();t.Q6J("ngClass",t.VKq(3,q,n.id===(null==o.selelctedCategory?null:o.selelctedCategory.id))),t.xp6(1),t.hij(" ",n.name," "),t.xp6(1),t.Q6J("ngIf",n.totalProducts)}}const N=[{path:"",component:(()=>{class e{constructor(n,o,i,c,a,p){this.navCtrl=n,this._user=o,this._global=i,this.toastr=c,this._account=a,this._product=p,this.isNavOpen=!1,this.isAccountOpen=!1,this.categoryList=[],this.selelctedCategory=null,this.products=[],this.filteredProducts=[],this.isAllProducts=!1,this.trendingProducts=[],this.loading=!1,this.error=null,this.subscriptions=new f.w0,this.apiSubscription=new f.w0,this.productList=[]}ngOnInit(){this.selelctedCategory=null,this.loadTrendingProducts()}ionViewWillEnter(){this.selelctedCategory=null,this.loadTrendingProducts()}loadTrendingProducts(){this._global.setLoader(!0);const n=this._user.getProductAdmin().subscribe(o=>{const i=Object.values(o.products||{});this.trendingProducts=i.reduce((a,p)=>a.concat(p),[]),this.filteredProducts=[...this.trendingProducts];const c=Object.values(o.categories||{});this.categoryList=c.reduce((a,p)=>a.concat(p),[]),this._global.setLoader(!1)},o=>{this._global.setLoader(!1)});this.subscriptions.add(n)}handleRefresh(n){this.loadTrendingProducts(),n.target.complete(),this.selelctedCategory=null}editProduct(n){this._product.setItemData(n),this.navCtrl.navigateForward("/purchasesedit")}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleNav(){this.isNavOpen=!this.isNavOpen}toggleAccount(){this.isAccountOpen=!this.isAccountOpen}closeNav(){this.isNavOpen=!1}closeAccount(){this.isAccountOpen=!1}logout(){var n=this;return(0,_.Z)(function*(){n._account.logout()})()}showAllProducts(){this.isAllProducts=!0,this.selelctedCategory=null,this.isNavOpen=!1,this.filteredProducts=this.trendingProducts}selectCategory(n){this.isAllProducts=!1,this.selelctedCategory=n,this.isNavOpen=!1,this.filterProducts()}processProducts(n){this.showAllProducts&&!this.categoryList?Object.keys(n.products).forEach(o=>{this.trendingProducts=[...this.trendingProducts,...n.products[o]]}):this.trendingProducts=n.products[this.selelctedCategory.id],Object.keys(n.categories).forEach(o=>{var i;this.categoryList.push({...n.categories[o],totalProducts:null===(i=n.products[o])||void 0===i?void 0:i.length})})}filterProducts(){this.filteredProducts=!this.showAllProducts&&this.categoryList||this.selectCategory?this.trendingProducts.filter(n=>n.category===this.selelctedCategory.id):[...this.trendingProducts]}changeSearch(){const n=this.searchProductField.trim().toLowerCase();this.filteredProducts=n?this.trendingProducts.filter(o=>{var i,c,a;return(null===(i=o.name)||void 0===i?void 0:i.toLowerCase().includes(n))||(null===(c=o.barcode)||void 0===c?void 0:c.toLowerCase())===n||(null===(a=o.code)||void 0===a?void 0:a.toLowerCase())===n}):[...this.trendingProducts]}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.SH),t.Y36(m.K),t.Y36(x.U),t.Y36(P._W),t.Y36(v.B),t.Y36(b.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-purchases-dashboard"]],decls:73,vars:11,consts:[["slot","start"],["defaultHref","/"],[2,"display","flex"],[1,"balaanz-logo"],["src","/assets/images/balaanz-logo.jpg"],["slot","fixed",3,"ionRefresh"],[1,"products-screen"],[1,"products-container"],[1,"product-header-container"],[1,"product-search"],[1,"product-search-form"],["type","text","placeholder","Search products...",1,"form-field",3,"ngModel","ngModelChange","input"],[1,"search-icon"],[1,"material-symbols-outlined"],[1,"product-filter"],[1,"trending-container"],["class","skeleton-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","products-header",4,"ngIf"],["class","products-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"app-navigation"],[1,"app-nav-bar",3,"click"],["src","assets/images/menu-icon.png","alt",""],[1,"app-nav-user",3,"click"],["src","assets/images/user-icon.png","alt",""],[1,"nav-container"],[1,"nav-sub-section"],[1,"nav-title"],[1,"btn","btn-small","btn-primary",3,"click"],[1,"category-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nav-bottom"],[1,"btn","btn-primary","btn-full",3,"click"],["name","person-outline"],["name","key-outline"],[3,"click"],["name","log-out-outline"],[1,"skeleton-container"],["class","skeleton-card",4,"ngFor","ngForOf"],[1,"skeleton-card"],[1,"skeleton-image"],[1,"skeleton-content"],[1,"skeleton-title"],[1,"skeleton-price"],[1,"error-container"],["name","alert-circle-outline"],[1,"products-header"],[4,"ngIf"],[1,"category-name"],[1,"products-list"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],[1,"product-image"],[3,"src","alt"],[1,"product-details"],[1,"product-name"],[1,"price-details"],[1,"price-container"],[1,"price-row"],[1,"price-qty"],[1,"price-value"],[1,"price-up"],[1,"price-pp"],[1,"price-bp"],[1,"edit-button"],["fill","clear",3,"click"],["name","create-outline"],[1,"empty-state"],["name","trending-up-outline","size","large"],[3,"ngClass","click"],["class","record-count",4,"ngIf"],[1,"record-count"]],template:function(n,o){1&n&&(t.TgZ(0,"div")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"div",2)(5,"ion-title"),t._uU(6,"Purchases"),t.qZA(),t.TgZ(7,"span",3),t._UZ(8,"img",4),t.qZA()()()(),t.TgZ(9,"ion-content")(10,"ion-refresher",5),t.NdJ("ionRefresh",function(c){return o.handleRefresh(c)}),t._UZ(11,"ion-refresher-content"),t.qZA(),t.TgZ(12,"div",6)(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",10)(17,"form")(18,"input",11),t.NdJ("ngModelChange",function(c){return o.searchProductField=c})("input",function(){return o.changeSearch()}),t.qZA(),t.TgZ(19,"div",12)(20,"span",13),t._uU(21,"search"),t.qZA()()(),t.TgZ(22,"div",14)(23,"span",13),t._uU(24,"tune"),t.qZA()()()()()()(),t.TgZ(25,"div",15),t.YNc(26,Z,2,2,"div",16),t.YNc(27,M,6,1,"div",17),t.YNc(28,T,4,2,"div",18),t.YNc(29,k,2,1,"div",19),t.YNc(30,w,4,0,"div",20),t.qZA(),t.TgZ(31,"div",21)(32,"div",22),t.NdJ("click",function(){return o.toggleNav()}),t._UZ(33,"img",23),t.qZA(),t.TgZ(34,"div",24),t.NdJ("click",function(){return o.toggleAccount()}),t._UZ(35,"img",25),t.qZA()(),t.TgZ(36,"div",26)(37,"div",27)(38,"div",28),t._uU(39," Category "),t.TgZ(40,"button",29),t.NdJ("click",function(){return o.showAllProducts()}),t._uU(41,"View All"),t.qZA()(),t.TgZ(42,"ul",30),t.YNc(43,D,5,5,"li",31),t.qZA()(),t.TgZ(44,"div",32)(45,"button",33),t.NdJ("click",function(){return o.closeNav()}),t._uU(46,"CLOSE"),t.qZA()()(),t.TgZ(47,"div",26)(48,"div",27)(49,"div",28),t._uU(50," Account "),t.qZA(),t.TgZ(51,"ul")(52,"li")(53,"div"),t._UZ(54,"ion-icon",34),t._uU(55," My Account "),t.qZA(),t.TgZ(56,"span",13),t._uU(57," chevron_right "),t.qZA()(),t.TgZ(58,"li")(59,"div"),t._UZ(60,"ion-icon",35),t._uU(61," Update Password "),t.qZA(),t.TgZ(62,"span",13),t._uU(63," chevron_right "),t.qZA()(),t.TgZ(64,"li",36),t.NdJ("click",function(){return o.logout()}),t.TgZ(65,"div"),t._UZ(66,"ion-icon",37),t._uU(67," Logout "),t.qZA(),t.TgZ(68,"span",13),t._uU(69," chevron_right "),t.qZA()()()(),t.TgZ(70,"div",32)(71,"button",33),t.NdJ("click",function(){return o.closeAccount()}),t._uU(72,"CLOSE"),t.qZA()()()()),2&n&&(t.xp6(18),t.Q6J("ngModel",o.searchProductField),t.xp6(8),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(1),t.Q6J("ngIf",o.filteredProducts.length>0),t.xp6(1),t.Q6J("ngIf",!o.loading&&!o.error&&o.filteredProducts.length>0),t.xp6(1),t.Q6J("ngIf",!o.loading&&!o.error&&0===o.trendingProducts.length),t.xp6(6),t.ekj("nav-open",o.isNavOpen),t.xp6(7),t.Q6J("ngForOf",o.categoryList),t.xp6(4),t.ekj("isAccountOpen",o.isAccountOpen))},dependencies:[g.mk,g.sg,g.O5,d.oU,d.YG,d.Sm,d.W2,d.gu,d.nJ,d.Wo,d.wd,d.sr,d.cs,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F],styles:[".balaanz-logo[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;height:30px}.balaanz-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:80%;object-fit:cover;margin-right:10px}.trending-container[_ngcontent-%COMP%]{padding:16px}.products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:#f8f8f8;border-radius:8px;margin-bottom:12px}.product-search[_ngcontent-%COMP%]{margin-top:12%}.category-name[_ngcontent-%COMP%]{color:red}.products-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding-bottom:60px}.product-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000001a;display:flex;height:120px;transition:transform .2s ease}.product-card[_ngcontent-%COMP%]:active{transform:scale(.98)}.product-image[_ngcontent-%COMP%]{width:120px;height:120px;min-width:120px;overflow:hidden}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;padding:10px;border-radius:20%}.product-details[_ngcontent-%COMP%]{flex:1;padding:10px;display:flex;flex-direction:column;position:relative}.product-name[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:#333;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.price-details[_ngcontent-%COMP%]{display:flex;gap:20%;padding-top:6%}.price[_ngcontent-%COMP%]{font-weight:600;color:#2dd36f;font-size:16px;margin-bottom:4px}.price-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:4px;margin:8px 0}.price-row[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:15px;color:#666;padding-bottom:5px}.price-label[_ngcontent-%COMP%]{font-weight:700;width:30px;margin-right:4px}.price-qty[_ngcontent-%COMP%]{color:#ff4961;padding-right:4px}.price-up[_ngcontent-%COMP%]{color:#4a6eb5;padding-right:4px}.price-pp[_ngcontent-%COMP%]{color:#4caf50;padding-right:4px}.price-bp[_ngcontent-%COMP%]{color:#ff9800;padding-right:4px}.price-value[_ngcontent-%COMP%]{font-weight:500;padding-right:10px}.edit-button[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.edit-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;--padding-start: 8px;--padding-end: 8px;font-size:x-large}.skeleton-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding-bottom:16px}.skeleton-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000001a;display:flex;height:120px}.skeleton-image[_ngcontent-%COMP%]{width:120px;height:120px;min-width:120px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.skeleton-content[_ngcontent-%COMP%]{padding:12px;flex:1}.skeleton-title[_ngcontent-%COMP%]{height:16px;background:#f0f0f0;margin-bottom:8px;border-radius:4px}.skeleton-price[_ngcontent-%COMP%]{height:14px;background:#f0f0f0;width:60%;border-radius:4px;margin-bottom:4px}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;text-align:center}.error-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#ff4961;margin-bottom:16px}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#666;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.app-navigation[_ngcontent-%COMP%]{position:fixed;width:100%;padding:15px 20px;background-color:#fff;bottom:0;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #e0e0e0;box-shadow:0 0 20px #0003;z-index:1000}.app-nav-bar[_ngcontent-%COMP%]{cursor:pointer}.app-nav-user[_ngcontent-%COMP%]{display:flex;cursor:pointer}.app-nav-user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #666;border-radius:50%;width:45px;height:45px;object-fit:cover}.nav-container[_ngcontent-%COMP%]{position:fixed;top:10px;left:-100%;width:80%;height:100vh;background:#ffffff;transition:.3s;z-index:1001;display:flex;flex-direction:column}.nav-container.nav-open[_ngcontent-%COMP%], .nav-container.isAccountOpen[_ngcontent-%COMP%]{left:0}.nav-sub-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.nav-title[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:space-between;align-items:center;background:#ffffff;border-bottom:1px solid #e0e0e0}.category-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0;margin:0;list-style:none}.category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #f0f0f0;cursor:pointer}.category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.category-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#e3f2fd}.category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .record-count[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-right:8px}.nav-bottom[_ngcontent-%COMP%]{padding:16px;background:#ffffff;border-top:1px solid #e0e0e0}.nav-bottom[_ngcontent-%COMP%]   .btn-full[_ngcontent-%COMP%]{width:100%;padding:12px}.products-screen[_ngcontent-%COMP%]{overflow-y:auto;padding-bottom:70px}.product-search-form[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ccc;border-radius:30px;padding:5px 10px;background-color:#fff;position:relative;z-index:10}.form-field[_ngcontent-%COMP%]{border:none;outline:none;padding:5px;font-size:16px;width:100%;color:#333}.search-icon[_ngcontent-%COMP%]{position:absolute;top:16px;left:25px;font-size:24px;color:#888}.product-filter[_ngcontent-%COMP%]{cursor:pointer;padding-left:10px;display:flex;align-items:center}.product-header-container[_ngcontent-%COMP%]{background-color:#f1f1f1;padding:8px 8px 1px;position:fixed;width:100%;top:0;z-index:100;display:flex;justify-content:space-between;align-items:center}@media screen and (max-width: 400px){.product-search-form[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:1%}.form-field[_ngcontent-%COMP%]{font-size:14px}.product-card[_ngcontent-%COMP%]{height:100px}.product-image[_ngcontent-%COMP%]{width:100px;height:100px;min-width:100px}}"]}),e})()}];let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(N),h.Bz]}),e})(),j=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,d.Pc,l.UX,l.u5,J]}),e})()}}]);