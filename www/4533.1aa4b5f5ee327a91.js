"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4533],{4533:(j,g,s)=>{s.r(g),s.d(g,{PurchasesDashboardModule:()=>F});var p=s(6814),a=s(5548),l=s(95),h=s(3057),_=s(5861),f=s(7394),t=s(6689),m=s(4695),x=s(5821),P=s(2425),v=s(7535),b=s(7942);function C(e,r){1&e&&(t.TgZ(0,"div",34),t._UZ(1,"div",35),t.TgZ(2,"div",36),t._UZ(3,"div",37)(4,"div",38),t.qZA()())}const O=function(){return[1,2,3,4]};function Z(e,r){1&e&&(t.TgZ(0,"div",32),t.YNc(1,C,5,0,"div",33),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,O)))}function M(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",39),t._UZ(1,"ion-icon",40),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"ion-button",31),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.loadTrendingProducts())}),t._uU(5,"Try Again"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(3),t.Oqu(n.error)}}function y(e,r){if(1&e&&(t.TgZ(0,"div")(1,"b",43),t._uU(2),t.qZA()()),2&e){const n=t.oxw(2);t.xp6(2),t.Oqu(n.selelctedCategory.name)}}function T(e,r){if(1&e&&(t.TgZ(0,"div",41)(1,"div"),t._uU(2),t.qZA(),t.YNc(3,y,3,1,"div",42),t.qZA()),2&e){const n=t.oxw();t.xp6(2),t.hij("Total: ",n.filteredProducts.length,""),t.xp6(1),t.Q6J("ngIf",null!==n.selelctedCategory)}}function A(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",46)(1,"div",47),t._UZ(2,"img",48),t.qZA(),t.TgZ(3,"div",49)(4,"h3",50),t._uU(5),t.qZA(),t.TgZ(6,"p",51),t._uU(7),t.qZA(),t.TgZ(8,"div",52)(9,"div",53),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"div",54)(13,"div",55)(14,"span",56),t._uU(15,"UP:"),t.qZA(),t.TgZ(16,"span",57),t._uU(17),t.qZA()(),t.TgZ(18,"div",55)(19,"span",56),t._uU(20,"PP:"),t.qZA(),t.TgZ(21,"span",57),t._uU(22),t.qZA()(),t.TgZ(23,"div",55)(24,"span",56),t._uU(25,"BP:"),t.qZA(),t.TgZ(26,"span",57),t._uU(27),t.qZA()()()(),t.TgZ(28,"div",58)(29,"ion-button",59),t.NdJ("click",function(){const c=t.CHM(n).$implicit,d=t.oxw(2);return t.KtG(d.editProduct(c))}),t._UZ(30,"ion-icon",60),t.qZA()()()()}if(2&e){const n=r.$implicit;t.xp6(2),t.Q6J("src",n.image1||n.image2||n.image3||n.image4||"assets/images/placeholder.png",t.LSH)("alt",n.name),t.xp6(3),t.Oqu(n.name),t.xp6(2),t.Oqu(n.code),t.xp6(3),t.Oqu(t.lcZ(11,8,n.price)),t.xp6(7),t.Oqu(n.unitPrice),t.xp6(5),t.Oqu(n.purchasePrice),t.xp6(5),t.Oqu(n.bulkPrice)}}function w(e,r){if(1&e&&(t.TgZ(0,"div",44),t.YNc(1,A,31,10,"div",45),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.filteredProducts)}}function k(e,r){1&e&&(t.TgZ(0,"div",61),t._UZ(1,"ion-icon",62),t.TgZ(2,"h3"),t._uU(3,"No Products"),t.qZA()())}function U(e,r){if(1&e&&(t.TgZ(0,"span",65),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.totalProducts)}}const D=function(e){return{active:e}};function q(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"li",63),t.NdJ("click",function(){const c=t.CHM(n).$implicit,d=t.oxw();return t.KtG(d.selectCategory(c))}),t._uU(1),t.YNc(2,U,2,1,"span",64),t.TgZ(3,"span",10),t._uU(4," chevron_right "),t.qZA()()}if(2&e){const n=r.$implicit,o=t.oxw();t.Q6J("ngClass",t.VKq(3,D,n.id===(null==o.selelctedCategory?null:o.selelctedCategory.id))),t.xp6(1),t.hij(" ",n.name," "),t.xp6(1),t.Q6J("ngIf",n.totalProducts)}}const N=[{path:"",component:(()=>{class e{constructor(n,o,i,c,d,u){this.navCtrl=n,this._user=o,this._global=i,this.toastr=c,this._account=d,this._product=u,this.isNavOpen=!1,this.isAccountOpen=!1,this.categoryList=[],this.selelctedCategory=null,this.products=[],this.filteredProducts=[],this.isAllProducts=!1,this.trendingProducts=[],this.loading=!1,this.error=null,this.subscriptions=new f.w0,this.apiSubscription=new f.w0,this.productList=[]}ngOnInit(){this.loadTrendingProducts()}ionViewWillEnter(){this.loadTrendingProducts()}loadTrendingProducts(){this._global.setLoader(!0);const n=this._user.getProductAdmin().subscribe(o=>{const i=Object.values(o.products||{});this.trendingProducts=i.reduce((d,u)=>d.concat(u),[]),this.filteredProducts=[...this.trendingProducts];const c=Object.values(o.categories||{});this.categoryList=c.reduce((d,u)=>d.concat(u),[]),this._global.setLoader(!1)},o=>{this._global.setLoader(!1)});this.subscriptions.add(n)}handleRefresh(n){this.loadTrendingProducts(),n.target.complete()}editProduct(n){this._product.setItemData(n),this.navCtrl.navigateForward("/purchasesedit")}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleNav(){this.isNavOpen=!this.isNavOpen}toggleAccount(){this.isAccountOpen=!this.isAccountOpen}closeNav(){this.isNavOpen=!1}closeAccount(){this.isAccountOpen=!1}logout(){var n=this;return(0,_.Z)(function*(){n._account.logout()})()}showAllProducts(){this.isAllProducts=!0,this.selelctedCategory=null,this.isNavOpen=!1,this.filteredProducts=this.trendingProducts}selectCategory(n){this.isAllProducts=!1,this.selelctedCategory=n,this.isNavOpen=!1,this.filterProducts()}processProducts(n){this.showAllProducts&&!this.categoryList?Object.keys(n.products).forEach(o=>{this.trendingProducts=[...this.trendingProducts,...n.products[o]]}):this.trendingProducts=n.products[this.selelctedCategory.id],Object.keys(n.categories).forEach(o=>{var i;this.categoryList.push({...n.categories[o],totalProducts:null===(i=n.products[o])||void 0===i?void 0:i.length})})}filterProducts(){this.filteredProducts=!this.showAllProducts&&this.categoryList||this.selectCategory?this.trendingProducts.filter(n=>n.category===this.selelctedCategory.id):[...this.trendingProducts]}changeSearch(){const n=this.searchProductField.trim().toLowerCase();this.filteredProducts=n?this.trendingProducts.filter(o=>{var i,c,d;return(null===(i=o.name)||void 0===i?void 0:i.toLowerCase().includes(n))||(null===(c=o.barcode)||void 0===c?void 0:c.toLowerCase())===n||(null===(d=o.code)||void 0===d?void 0:d.toLowerCase())===n}):[...this.trendingProducts]}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.SH),t.Y36(m.K),t.Y36(x.U),t.Y36(P._W),t.Y36(v.B),t.Y36(b.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-purchases-dashboard"]],decls:64,vars:11,consts:[["slot","start"],["defaultHref","/"],["slot","fixed",3,"ionRefresh"],[1,"products-screen"],[1,"products-container"],[1,"product-header-container"],[1,"product-search"],[1,"product-search-form"],["type","text","placeholder","Search products...",1,"form-field",3,"ngModel","ngModelChange","input"],[1,"search-icon"],[1,"material-symbols-outlined"],[1,"product-filter"],[1,"trending-container"],["class","skeleton-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","products-header",4,"ngIf"],["class","products-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"app-navigation"],[1,"app-nav-bar",3,"click"],["src","assets/images/menu-icon.png","alt",""],[1,"app-nav-user",3,"click"],["src","assets/images/user-icon.png","alt",""],[1,"nav-container"],[1,"nav-sub-section"],[1,"nav-title"],[1,"btn","btn-small","btn-primary",3,"click"],[1,"category-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nav-bottom"],[1,"btn","btn-primary","btn-full",3,"click"],[3,"click"],[1,"skeleton-container"],["class","skeleton-card",4,"ngFor","ngForOf"],[1,"skeleton-card"],[1,"skeleton-image"],[1,"skeleton-content"],[1,"skeleton-title"],[1,"skeleton-price"],[1,"error-container"],["name","alert-circle-outline"],[1,"products-header"],[4,"ngIf"],[1,"category-name"],[1,"products-list"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],[1,"product-image"],[3,"src","alt"],[1,"product-details"],[1,"product-name"],[1,"product-code"],[1,"price-details"],[1,"price"],[1,"price-container"],[1,"price-row"],[1,"price-label"],[1,"price-value"],[1,"edit-button"],["fill","clear",3,"click"],["name","create-outline"],[1,"empty-state"],["name","trending-up-outline","size","large"],[3,"ngClass","click"],["class","record-count",4,"ngIf"],[1,"record-count"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Products"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"ion-refresher",2),t.NdJ("ionRefresh",function(c){return o.handleRefresh(c)}),t._UZ(8,"ion-refresher-content"),t.qZA(),t.TgZ(9,"div",3)(10,"div",4)(11,"div",5)(12,"div",6)(13,"div",7)(14,"form")(15,"input",8),t.NdJ("ngModelChange",function(c){return o.searchProductField=c})("input",function(){return o.changeSearch()}),t.qZA(),t.TgZ(16,"div",9)(17,"span",10),t._uU(18,"search"),t.qZA()()(),t.TgZ(19,"div",11)(20,"span",10),t._uU(21,"tune"),t.qZA()()()()()()(),t.TgZ(22,"div",12),t.YNc(23,Z,2,2,"div",13),t.YNc(24,M,6,1,"div",14),t.YNc(25,T,4,2,"div",15),t.YNc(26,w,2,1,"div",16),t.YNc(27,k,4,0,"div",17),t.qZA(),t.TgZ(28,"div",18)(29,"div",19),t.NdJ("click",function(){return o.toggleNav()}),t._UZ(30,"img",20),t.qZA(),t.TgZ(31,"div",21),t.NdJ("click",function(){return o.toggleAccount()}),t._UZ(32,"img",22),t.qZA()(),t.TgZ(33,"div",23)(34,"div",24)(35,"div",25),t._uU(36," Category "),t.TgZ(37,"button",26),t.NdJ("click",function(){return o.showAllProducts()}),t._uU(38,"View All"),t.qZA()(),t.TgZ(39,"ul",27),t.YNc(40,q,5,5,"li",28),t.qZA()(),t.TgZ(41,"div",29)(42,"button",30),t.NdJ("click",function(){return o.closeNav()}),t._uU(43,"CLOSE"),t.qZA()()(),t.TgZ(44,"div",23)(45,"div",24)(46,"div",25),t._uU(47," Account "),t.qZA(),t.TgZ(48,"ul")(49,"li"),t._uU(50," My Account "),t.TgZ(51,"span",10),t._uU(52," chevron_right "),t.qZA()(),t.TgZ(53,"li"),t._uU(54," Update Password "),t.TgZ(55,"span",10),t._uU(56," chevron_right "),t.qZA()(),t.TgZ(57,"li",31),t.NdJ("click",function(){return o.logout()}),t._uU(58," Logout "),t.TgZ(59,"span",10),t._uU(60," chevron_right "),t.qZA()()()(),t.TgZ(61,"div",29)(62,"button",30),t.NdJ("click",function(){return o.closeAccount()}),t._uU(63,"CLOSE"),t.qZA()()()()),2&n&&(t.xp6(15),t.Q6J("ngModel",o.searchProductField),t.xp6(8),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(1),t.Q6J("ngIf",o.filteredProducts.length>0),t.xp6(1),t.Q6J("ngIf",!o.loading&&!o.error&&o.filteredProducts.length>0),t.xp6(1),t.Q6J("ngIf",!o.loading&&!o.error&&0===o.trendingProducts.length),t.xp6(6),t.ekj("nav-open",o.isNavOpen),t.xp6(7),t.Q6J("ngForOf",o.categoryList),t.xp6(4),t.ekj("isAccountOpen",o.isAccountOpen))},dependencies:[p.mk,p.sg,p.O5,a.oU,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.nJ,a.Wo,a.wd,a.sr,a.cs,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F,p.H9],styles:[".trending-container[_ngcontent-%COMP%]{padding:16px}.products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:#f8f8f8;border-radius:8px;margin-bottom:12px}.product-search[_ngcontent-%COMP%]{margin-top:10%}.category-name[_ngcontent-%COMP%]{color:red}.products-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding-bottom:60px}.product-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000001a;display:flex;height:120px;transition:transform .2s ease}.product-card[_ngcontent-%COMP%]:active{transform:scale(.98)}.product-image[_ngcontent-%COMP%]{width:120px;height:120px;min-width:120px;overflow:hidden}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;padding:20px}.product-details[_ngcontent-%COMP%]{flex:1;padding:10px;display:flex;flex-direction:column;position:relative}.product-name[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-code[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:2px 0 8px}.price-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.price[_ngcontent-%COMP%]{font-weight:600;color:#2dd36f;font-size:16px;margin-bottom:4px}.price-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.price-row[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;color:#666}.price-label[_ngcontent-%COMP%]{font-weight:700;width:30px;margin-right:4px}.price-label[_ngcontent-%COMP%]:nth-child(1){color:#4a6eb5}.price-label[_ngcontent-%COMP%]:nth-child(3){color:#4caf50}.price-label[_ngcontent-%COMP%]:nth-child(5){color:#ff9800}.price-value[_ngcontent-%COMP%]{font-weight:500}.edit-button[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.edit-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;--padding-start: 8px;--padding-end: 8px}.skeleton-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding-bottom:16px}.skeleton-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000001a;display:flex;height:120px}.skeleton-image[_ngcontent-%COMP%]{width:120px;height:120px;min-width:120px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.skeleton-content[_ngcontent-%COMP%]{padding:12px;flex:1}.skeleton-title[_ngcontent-%COMP%]{height:16px;background:#f0f0f0;margin-bottom:8px;border-radius:4px}.skeleton-price[_ngcontent-%COMP%]{height:14px;background:#f0f0f0;width:60%;border-radius:4px;margin-bottom:4px}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;text-align:center}.error-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#ff4961;margin-bottom:16px}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#666;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.app-navigation[_ngcontent-%COMP%]{position:fixed;width:100%;padding:15px 20px;background-color:#fff;bottom:0;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #e0e0e0;box-shadow:0 0 20px #0003;z-index:1000}.app-nav-bar[_ngcontent-%COMP%]{cursor:pointer}.app-nav-user[_ngcontent-%COMP%]{display:flex;cursor:pointer}.app-nav-user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #666;border-radius:50%;width:45px;height:45px;object-fit:cover}.nav-container[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;width:80%;height:100vh;background:#ffffff;transition:.3s;z-index:1001;display:flex;flex-direction:column}.nav-container.nav-open[_ngcontent-%COMP%], .nav-container.isAccountOpen[_ngcontent-%COMP%]{left:0}.nav-sub-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.nav-title[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:space-between;align-items:center;background:#ffffff;border-bottom:1px solid #e0e0e0}.category-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0;margin:0;list-style:none}.category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #f0f0f0;cursor:pointer}.category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.category-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#e3f2fd}.category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .record-count[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-right:8px}.nav-bottom[_ngcontent-%COMP%]{padding:16px;background:#ffffff;border-top:1px solid #e0e0e0}.nav-bottom[_ngcontent-%COMP%]   .btn-full[_ngcontent-%COMP%]{width:100%;padding:12px}.products-screen[_ngcontent-%COMP%]{overflow-y:auto;padding-bottom:70px}.product-search-form[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ccc;border-radius:30px;padding:5px 10px;background-color:#fff;position:relative;z-index:10}.form-field[_ngcontent-%COMP%]{border:none;outline:none;padding:5px;font-size:16px;width:100%;color:#333}.search-icon[_ngcontent-%COMP%]{position:absolute;top:16px;left:25px;font-size:24px;color:#888}.product-filter[_ngcontent-%COMP%]{cursor:pointer;padding-left:10px;display:flex;align-items:center}.product-header-container[_ngcontent-%COMP%]{background-color:#f1f1f1;padding:8px 8px 1px;position:fixed;width:100%;top:0;z-index:100;display:flex;justify-content:space-between;align-items:center}@media screen and (max-width: 400px){.product-search-form[_ngcontent-%COMP%]{padding:5px}.form-field[_ngcontent-%COMP%]{font-size:14px}.product-card[_ngcontent-%COMP%]{height:100px}.product-image[_ngcontent-%COMP%]{width:100px;height:100px;min-width:100px}}"]}),e})()}];let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(N),h.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,a.Pc,l.UX,l.u5,J]}),e})()}}]);