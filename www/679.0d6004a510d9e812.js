"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[679],{679:(y,m,r)=>{r.r(m),r.d(m,{AddNewProductModule:()=>O});var g=r(6814),p=r(3057),P=r(5861),d=r(95),f=r(7394),t=r(6689),o=r(5548),C=r(4695),h=r(7942);function v(n,s){if(1&n&&t._UZ(0,"img",17),2&n){const e=t.oxw();t.Q6J("src",e.imagePreview,t.LSH)}}function b(n,s){1&n&&t._UZ(0,"ion-icon",18)}function w(n,s){if(1&n&&(t.TgZ(0,"ion-select-option",19),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}const M=[{path:"",component:(()=>{class n{constructor(e,i,a,l,c,u){this.fb=e,this.loadingCtrl=i,this.toastCtrl=a,this._user=l,this.navCtrl=c,this._product=u,this.imagePreview=null,this.subscriptions=new f.w0,this.categories=[],this.productForm=this.fb.group({name:["",[d.kI.required,d.kI.minLength(3)]],unitPrice:[0],barcode:[""],categoryId:["",d.kI.required],image:[""],stockAmount:[0],shortDescription:[""],longDescription:[""]}),this.categories=this._product.getCategories()}ngOnInit(){}onImageSelect(e){var i=this;return(0,P.Z)(function*(){const a=e.target.files[0];if(a){if(a.size/1024>700)return void(yield(yield i.toastCtrl.create({message:"Image size must be less than or equal to 700 KB.",duration:2e3,color:"danger"})).present());const c=new FileReader;c.onload=()=>{i.imagePreview=c.result,i.productForm.patchValue({image:c.result})},c.readAsDataURL(a)}})()}onSubmit(){var e=this;return(0,P.Z)(function*(){if(e.productForm.valid){const i=yield e.loadingCtrl.create({message:"Adding product..."});yield i.present(),console.log(e.productForm.value);try{const a={...e.productForm.value,createdDate:(new Date).toISOString(),lastUpdatedDate:(new Date).toISOString()};console.log(a);const l=e._user.getnewproductadd(a).subscribe(u=>{console.log(u)});e.subscriptions.add(l),yield i.dismiss(),yield(yield e.toastCtrl.create({message:"Product added successfully!",duration:2e3,color:"success"})).present(),setTimeout(()=>{e.navCtrl.navigateForward("/product")},2e3),e.productForm.reset(),e.imagePreview=null}catch{yield i.dismiss(),yield(yield e.toastCtrl.create({message:"Failed to add product. Please try again.",duration:2e3,color:"danger"})).present()}}else yield(yield e.toastCtrl.create({message:"Please fill in all required fields correctly.",duration:2e3,color:"warning"})).present()})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.qu),t.Y36(o.HT),t.Y36(o.yF),t.Y36(C.K),t.Y36(o.SH),t.Y36(h.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-new-product"]],decls:33,vars:7,consts:[["slot","start"],["defaultHref","/products"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"image-upload-container"],[1,"image-preview"],[3,"src",4,"ngIf"],["name","image-outline",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],["fileInput",""],["fill","clear","expand","block",3,"click"],["position","stacked"],["formControlName","name","placeholder","Enter product name"],["formControlName","barcode","placeholder","Enter barcode"],["formControlName","categoryId","placeholder","Select category"],[3,"value",4,"ngFor","ngForOf"],[1,"submit-button"],["expand","block","type","submit"],[3,"src"],["name","image-outline"],[3,"value"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Add New Product"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(8,"div",3)(9,"div",4),t.YNc(10,v,1,1,"img",5),t.YNc(11,b,1,0,"ion-icon",6),t.TgZ(12,"input",7,8),t.NdJ("change",function(c){return i.onImageSelect(c)}),t.qZA(),t.TgZ(14,"ion-button",9),t.NdJ("click",function(){t.CHM(a);const c=t.MAs(13);return t.KtG(c.click())}),t._uU(15),t.qZA()()(),t.TgZ(16,"ion-list")(17,"ion-item")(18,"ion-label",10),t._uU(19,"Product Name*"),t.qZA(),t._UZ(20,"ion-input",11),t.qZA(),t.TgZ(21,"ion-item")(22,"ion-label",10),t._uU(23,"Barcode"),t.qZA(),t._UZ(24,"ion-input",12),t.qZA(),t.TgZ(25,"ion-item")(26,"ion-label",10),t._uU(27,"Category*"),t.qZA(),t.TgZ(28,"ion-select",13),t.YNc(29,w,2,2,"ion-select-option",14),t.qZA()()(),t.TgZ(30,"div",15)(31,"ion-button",16),t._uU(32," Add Product "),t.qZA()()()()}2&e&&(t.xp6(7),t.Q6J("formGroup",i.productForm),t.xp6(2),t.ekj("has-image",i.imagePreview),t.xp6(1),t.Q6J("ngIf",i.imagePreview),t.xp6(1),t.Q6J("ngIf",!i.imagePreview),t.xp6(4),t.hij(" ",i.imagePreview?"Change Image":"Upload Image"," "),t.xp6(14),t.Q6J("ngForOf",i.categories))},dependencies:[g.sg,g.O5,o.oU,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.pK,o.Ie,o.Q$,o.q_,o.t9,o.n0,o.wd,o.sr,o.QI,o.j9,o.cs,d._Y,d.JJ,d.JL,d.sg,d.u],styles:[".image-upload-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px 0}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{width:200px;height:200px;border:2px dashed var(--ion-color-medium);border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;position:relative;background:var(--ion-color-light)}.image-upload-container[_ngcontent-%COMP%]   .image-preview.has-image[_ngcontent-%COMP%]{border-style:solid}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:var(--ion-color-medium)}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.image-upload-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;bottom:8px;background:rgba(var(--ion-color-light-rgb),.9);border-radius:20px;font-size:14px}ion-list[_ngcontent-%COMP%]{background:transparent;padding:0;margin:16px 0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--border-color: var(--ion-color-light);margin-bottom:16px;--background: var(--ion-color-light);border-radius:8px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--ion-color-dark);font-weight:500}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{--padding-start: 16px;--background: var(--ion-color-light);border-radius:8px;font-size:16px}.submit-button[_ngcontent-%COMP%]{margin:24px 0}.submit-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-weight:600;font-size:16px;margin:0}@media (min-width: 768px){form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}}"]}),n})()}];let _=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(M),p.Bz]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,_,o.Pc,d.UX]}),n})()}}]);